# Slaicke

## _Description_

Slaicke is a slack-like team chat running on NodeJS.
The goal is to have a browser-oriented team chat, in the likes of Discord, Slack, etc.

## _Modules used_

### __Babel__

Babel is a JS compiler. It enables us to use advanced JS functionnality and to make them available in all browsers.

### __Bcrypt__

Bcrypt is a module that is used to encrypt, to hash password.

### __Body-parser__

Body-parser is used to parse the body of a POST request.

### __Cluster__

Cluster is simply used to clusterize a NodeJS process, i.e a process will run on mutliple threads.

### __Connect-redis__

Connect-redis is used to 

### __Cookie-parser__

Like body-parser, cookie-parser enables us to parse cookies.

### __Debug__

Well, it's used for debugging purpose.

### __Express__

Express is the framework used to run Slaicke. It is one of the most common, used, and developped framework on the NodeJS environment. Express is a micro-framework, meaning you don't start from scratch, but you still have a lot to code. For information, KoaJS was developped by the team behind Express, and was release to be the 5th version of Express.

### __Express-session__

Express-session is a module used to manage session with the Express framework

### __Express-validation__

Express-validation enables us to validate routes. For example, for the route `/blog/:year/:month/:day/:slug`, you can check if the year is a 4-digit number, the month a 2-digit number equals to max 12, the day a 2-digit number equals to max 31, and the slug a string containing only allowed characters.

### __Jade__

Jade is the template engine running on this project. All the views are generated by Jade.

### __Joi__

Joi is 

### __Marked__

Marked is a module used for markdown generation.

### __Mongoose__

Mongoose is the module that link the MongoDataBase to Slaicke application.

### __Morgan__

Morgan is a module used to log information.

### __Nodemon__

Nodemon is a module used in development environment. It enables us to relaunch the application after every file save.

### __Os__

Os is use to get OS information. I guess. Used with Cluster.

### __Passport__

Passport is a module that manage login, signin. It works with Strategies.

### __Passport-facebook__

Facebook version of passport.

### __Passport-google__

Google version of passport

### __Passport-local__

Local version of passport (the basic version).

### __Passport-twitter__

Twitter version of passport.

### __Redis__

Redis enables us to connect to a Redis database. Redis is a key-value store that is hugely fast.

### __Slug__

Slug is a module that slugify a string.

### __Socket.io__

Socket.io is used to connect two parts using websockets. It creates a realtime communication between those two parts.

### __Socket.io-redis__

Redis version of socket.io.

### __Sticky-session__

Sticky-session is


## _Routes list_

### __Index__

Routes that start with `/`

`/` -> Index route: If logged in, you'll see the list of channel, if not, you'll be redirected to the login/signin page.

### __Authentication__

Routes that start with `/auth`

`/login` -> Login route
`/facebook` -> Facebook login/signin route
`/login/twitter` -> Twitter login/signin route
`/auth/google` -> Google login/signin route
`/logout` -> Logout route
`/signup` -> Signin route

### __Rooms__

Routes that start with `/room`

`/:slug` -> Room route. The argument `:slug` is the slug of the room.
`/create` -> Room create route.
`/:id/delete` -> Room delete route. The argument `:id` is the id of the room to be deleted.

### __Messages__

Routes that start with `/message`

`/send` -> Message sending route.
`/:id/delete` -> Message delete route. The argument `:id` is the id of the message to be deleted.
`/:id/update` -> Message update route. The argument `:id` is the id of the room to be updated.

### __Emote__

Routes that start with `/emote`

`/send/:message_id` -> Emote sending route. The argument `:message_id` is the id of the message which will get the emote.

### __User__

Routes that start `/user`

`/:id/kick/:room` -> User kicking route. The argument `:id`is the id of the user that will get kicked. The argument `:room` is the id of the room from which the user will get kicked.

## _Ce que vous avez besoin de savoir_

### __Les fonctionnalités__

Liste des fonctionnalités et de leur avancement [ici](https://github.com/Mehdi40/Slaicke/issues/1)

### __Les fichiers nécessaires__

`/bin/www.js` -> Clusterisation du process NodeJS
`/bin/helpers/passport` -> Gestion des connexion/inscription
`/bin/routes` -> Les routes
> N'hésitez pas à modifier quelques détails, par exemple le nom des arguments dans les routes, ou même les routes en elle-même. Vous pouvez aussi renomer les fichiers importés.

`/bin/models` -> Les models
> N'hésitez pas à modifier quelques détails, par exemple le nom des attributs (`username` en `nom`ou en `surname` ou autre).

`/bin/views` -> Les views
> Pour les vues, j'ai utilisé le template que le prof avait pris pour sa démo, en cours. Je vous laisse vous débrouiller pour ça. J'ai utilisé Jade, mais vous pouvez utiliser n'importe quel moteur de template tournant sous NodeJS. Vu que c'est la partie visuelle, il faut que ça soit le plus différent possible, il faut que vous vous en chargiez. Mais pas de soucis, toutes les informations nécessaires sont bien envoyés, vous avez à gérer que l'aspect visuel.

`/bin/public` -> Les fichiers public
> Ce sont les fichiers accessibles au navigateur. Vous y stockez les fichiers JS utilisés par le navigateur (`socket.io` par exemple), et les fichiers de style. Là je vais vous demander de carrément changer l'arborescence. Ce dossier est appelé dans `app.js`, ligne 88 :

>`app.use('/static', express.static(__dirname + '/bin/public'));`

> Remplacez `/bin/public` par autre chose, changez le de place. Et changez aussi le `/static`. Ce qu'il se passera, c'est que dans vos vues, au lieu d'appeler le fichier CSS en faisant un `/static/style.css`, vous ferez un `/tamere/style.css` si vous avez changer `/static` en `/tamere`

`/bin/config` -> Les fichiers de config
> On stocke les clés privés pour les API externes (Facebook, Google, Twitter par défaut)

> __Je vous demande aussi de changer l'arborescence général du projet, ça évitera qu'on se fasse capter facilement. Moi j'ai l'habitude de développer des APIs NodeJS et c'est toujours comme ça que je fais : Un dossier `/bin` qui regroupe tous les fichiers, je laisse à la racine que les fichiers globaux genre `.eslintrc`, `.gitignore`, `.babelrc`, etc.__

> __Au pire, mettez tous les dossier que j'ai mis dans `/bin` à la racine, comme tout le monde (ou presque), ou essayez de reprendre l'arborescence que le prof a utilisée en cours. Idem, le projet utilise Babel, qui va compiler mon code en JS Vanilla (compréhensible par tous les navigateurs), renseignez-vous un peu sur son fonctionnement au cas où (et puis ça vous fera apprendre des choses). J'ai utilisé Yarn au lieu de NPM, que je préfère personnellement. Je vous encourage à utliser NPM, si vous ne connaissez pas Yarn.__

> __N'oubliez pas de modifier le fichier `/package.json`, c'est là où il y a mon nom et cie. Je vous conseille de ne même pas faire de `git clone` de mon repo, mais de faire un C/C des fichiers intéressants, ça brouillera encore plus les pistes.__

> __À l'heure actuelle, le projet n'est pas terminée. Je vous donne accès au repo pour que vous puissiez commencer à vous impreigner du code en regardant vite fait, de temps en temps. Je fais pas ça pour vous filer le code gratos, comme Raph pourrait faire pour le C#, je fais ça pour vous pré-mâcher le taf, mais que vous puissiez aussi voir comment tout fonctionne. Ca peut être que bénéfique pour tout le monde (vous perfectionnez votre pratique/connaissance de NodeJS, et moi j'apprends à être plus rigoureux quand je code et à fournir plus d'explication à mon code).__
